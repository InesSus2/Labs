package es.uv.eu.Ahorcado.view;

import es.uv.eu.Ahorcado.model.AhorcadoModel;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import java.awt.GridLayout;

/*********************************************************************
 * @author Inés Jaso Pernod
 * @author Natalia Tauste Rubio
 ********************************************************************/

public class JuegoPanel extends JPanel{
    //private AhorcadoMenuBar menu;
    private GameCenterPanel gameCenterPanel;
    private GameSouthPanel gameSouthPanel;
    private GameNorthPanel gameNorthPanel;
    //private LetrasUtilJuegoPanel letrasUtilizadas;
    //private AhorcadoModel model;

    public JuegoPanel(AhorcadoModel model, int tamPalabra){
        this.setLayout(new BorderLayout());
        //this.model = model;
        gameCenterPanel = new GameCenterPanel(model, tamPalabra);
        gameSouthPanel = new GameSouthPanel();
        gameNorthPanel = new GameNorthPanel();
        this.add(gameNorthPanel,BorderLayout.NORTH);
        this.add(gameCenterPanel,BorderLayout.CENTER);
        this.add(gameSouthPanel, BorderLayout.SOUTH);

        this.setVisible(true);
    }

    /*********************************************************************
     * @brief Getters de los atributos necesarios
     ********************************************************************/
    public char getLetraIntroducida() {
        return gameSouthPanel.getLetraIntroducida();
    }

     public String getTextoIntroducido() {
        return gameSouthPanel.getTextoIntroducido();
    }

    public void mostrarLetra(char letra, Color c) {
        gameCenterPanel.mostrarLetra(letra, c);
        //gameCenter2Panel.mostrarLetra(letra, c);
    }

    /************************** resetTextField() *************************
     * @brief Método para resetear la configuración del textField del
     * panel JuegoPanel
     ********************************************************************/
    public void resetTextField(){
        gameSouthPanel.resetTextField();
    }

    public void setPuntuacionUsuLabel(int puntuacion) {
        gameNorthPanel.setPuntuacionUsuLabel(puntuacion);
    }

    public void appendTextArea(char letra, Color color, int fallos) {
        gameNorthPanel.appendTextArea(letra, color, fallos);
    }

    public void actualizarImagenAhorcado() {
        if (gameCenterPanel != null) {
            gameCenterPanel.actualizarImagenAhorcado();
        }
    }

    public void actualizarPalabraAdivinada(String palabraPorAdivinar, char letraProbada, Color colorLetra) {
        gameCenterPanel.actualizarPalabraAdivinada(palabraPorAdivinar, letraProbada, colorLetra);
    }

    /************************ setActionListener() *************************
     * @brief Asigna un ActionListener a todos los elementos del menú
     * 
     * @param listener ActionListener a asignar
     ********************************************************************/
    public void setActionListener(ActionListener listener){
        gameSouthPanel.setActionListener(listener);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame("Prueba JuegoPanel");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(1200, 800);
            frame.add(new JuegoPanel(new AhorcadoModel("OSO"), 3));
            
            frame.setVisible(true);
        });
    }
}
