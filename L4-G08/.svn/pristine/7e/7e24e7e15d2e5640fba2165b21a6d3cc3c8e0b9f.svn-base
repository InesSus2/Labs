/*
package Ahorcado.model;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

/**
 * 
 * @author Inés Jaso Pernod
 * @author Natalia Tauste Rubio
 */

/*
public class AhorcadoModel {
    private BufferedImage imagen;
    private String imagenFileName = "";

    public AhorcadoModel() {
        try {
            imagenFileName = "/Estilos/Estilo1/Fallo0.png";
            imagen = ImageIO.read(getClass().getResourceAsStream(imagenFileName));
        }
        catch (IOException | IllegalArgumentException e) {
            System.out.println("Problemas leyendo la imagen '" + this.imagenFileName + "'.");
            System.out.println("Motivo: " + e.getLocalizedMessage());
        }
    }

    public BufferedImage getImagen() {
        return imagen;
    }

    public String getImagenFileName() {
        return imagenFileName;
    }

    public void loadImagen(File imagenFile) {
        if (imagenFile != null) {
            this.imagenFileName = imagenFile.getName();
            try {
                imagen = ImageIO.read(imagenFile);
            }
            catch (IOException e) {
                System.out.println("Problemas leyendo la imagen '" + this.imagenFileName + "'.");
                System.out.println("Motivo: " + e.getLocalizedMessage());
            }
        }
    }

    /**
     * Clase persona que contiene la informacion de una persona
     *
    public class Persona{
        private int intentos;
        private int ganar;
        private String nombre;
        private static int num = 0;
        
        /**
         * Constructor por defecto
         * @param n Nombre
         * @param ganar Si ha ganado o no
         * @param intentos Numero de intentos
         *
        public Persona(String n, int ganar, int intentos){
            this.nombre = n;
            this.ganar = ganar;
            this.intentos = intentos;
            num++;
        }

        /**
         * Getter de nombre
         * @return 
         *
       public String getNombre(){
           return this.nombre;
       }

       /**
        * Getter de intentos
        * @return 
        *
       public int getIntentos(){
           return this.intentos;
       }

       /**
        * Getter de si ha ganado o no
        * @return 
        *
       public int getGanar(){
           return this.ganar;
       }

       /**
        * Getter de numero de personas
        * @return 
        *
       public int getNum(){
           return num;
       }
    }
}
*/

package Ahorcado.model;

import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.HashSet;
import java.util.Set;
import javax.imageio.ImageIO;

/**
 * Modelo del juego del Ahorcado
 * Almacena únicamente el estado del juego
 * 
 * @author Inés Jaso Pernod
 * @author Natalia Tauste Rubio
 */
public class AhorcadoModel {

    private String palabraSecreta;
    private Set<Character> letrasUsadas;
    private int fallos;
    private int puntuacion;

    private BufferedImage imagenAhorcado;
    private String rutaImagen;

    public static final int MAX_FALLOS = 5;

    /**
     * Constructor del modelo
     */
    public AhorcadoModel(String palabra) {
        this.palabraSecreta = palabra.toUpperCase();
        this.letrasUsadas = new HashSet<>();
        this.fallos = 0;
        this.puntuacion = 0;

        cargarImagen("/Estilos/Estilo1/Fallo0.png");
    }

    /**
     * Procesa una letra introducida por el usuario
     */
    public boolean probarLetra(char letra) {
        letra = Character.toUpperCase(letra);

        if (letrasUsadas.contains(letra)) {
            return false;
        }

        letrasUsadas.add(letra);
        puntuacion++;

        if (!palabraSecreta.contains(String.valueOf(letra))) {
            fallos++;
            cargarImagen("/Estilos/Estilo1/Fallo" + fallos + ".png");
            return false;
        }
        return true;
    }

    /**
     * Comprueba si el jugador ha ganado
     */
    public boolean haGanado() {
        for (char c : palabraSecreta.toCharArray()) {
            if (!letrasUsadas.contains(c)) {
                return false;
            }
        }
        return true;
    }

    /**
     * Comprueba si el jugador ha perdido
     */
    public boolean haPerdido() {
        return fallos >= MAX_FALLOS;
    }

    /**
     * Carga la imagen del ahorcado según los fallos
     */
    private void cargarImagen(String ruta) {
        this.rutaImagen = ruta;
        try {
            imagenAhorcado = ImageIO.read(getClass().getResourceAsStream(ruta));
        } catch (IOException | IllegalArgumentException e) {
            System.err.println("Error cargando imagen: " + ruta);
        }
    }

    // GETTERS

    public BufferedImage getImagenAhorcado() {
        return imagenAhorcado;
    }

    public int getFallos() {
        return fallos;
    }

    public int getPuntuacion() {
        return puntuacion;
    }

    public Set<Character> getLetrasUsadas() {
        return letrasUsadas;
    }

    public String getPalabraSecreta() {
        return palabraSecreta;
    }
}